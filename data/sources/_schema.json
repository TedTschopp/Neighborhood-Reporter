{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "sources-schema",
  "title": "Sources",
  "description": "Schema for news source definitions",
  "type": "object",
  "required": ["sources"],
  "properties": {
    "sources": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "type", "category", "media_type", "active"],
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^[a-z0-9-]+$",
            "description": "Unique identifier (lowercase, hyphens only)"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "description": "Display name of the source"
          },
          "type": {
            "type": "string",
            "enum": ["rss", "api", "scrape", "social", "newsletter", "broadcast", "manual"],
            "description": "Technical type for fetching content"
          },
          "category": {
            "type": "string",
            "enum": [
              "social",
              "civic", 
              "corporate",
              "religious",
              "educational",
              "municipal",
              "media",
              "local-news",
              "hyperlocal",
              "public-safety",
              "events",
              "business",
              "real-estate",
              "environment",
              "transit",
              "other"
            ],
            "description": "Content category"
          },
          "media_type": {
            "type": "string",
            "enum": ["online", "newspaper", "print", "television", "broadcast", "radio", "podcast", "newsletter", "social-media", "social", "blog", "app"],
            "description": "Type of media outlet"
          },
          "organization": {
            "type": "string",
            "description": "Parent organization name"
          },
          "organization_type": {
            "type": "string",
            "enum": ["government", "nonprofit", "business", "religious", "educational", "media", "community", "individual", "civic", "corporate"],
            "description": "Type of organization"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Main website URL"
          },
          "feed_url": {
            "type": "string",
            "format": "uri",
            "description": "RSS/Atom feed URL"
          },
          "api_endpoint": {
            "type": "string",
            "format": "uri",
            "description": "API endpoint URL"
          },
          "app_store_url": {
            "type": "string",
            "format": "uri",
            "description": "Apple App Store URL for mobile apps"
          },
          "play_store_url": {
            "type": "string",
            "format": "uri",
            "description": "Google Play Store URL for mobile apps"
          },
          "web_app_url": {
            "type": "string",
            "format": "uri",
            "description": "Web application URL for browser-based apps"
          },
          "signup_url": {
            "type": "string",
            "format": "uri",
            "description": "Registration/signup page URL"
          },
          "social_handle": {
            "type": "string",
            "description": "Social media handle/username"
          },
          "social_platform": {
            "type": "string",
            "enum": [
              "twitter", "facebook", "instagram", "nextdoor", "linkedin", "youtube", 
              "tiktok", "threads", "mastodon", "bluesky", "reddit", "discord", 
              "pinterest", "snapchat", "soundcloud", "telegram", "github", "gitlab",
              "medium", "patreon", "steam", "twitch", "whatsapp", "signal"
            ],
            "description": "Social media platform"
          },
          "neighborhoods": {
            "type": "array",
            "items": { "type": "string" },
            "description": "List of neighborhood IDs this source covers, or ['all'] for citywide"
          },
          "coverage_area": {
            "type": "string",
            "enum": ["hyperlocal", "neighborhood", "district", "city", "county", "region", "state", "national"],
            "description": "Geographic coverage area"
          },
          "reliability_score": {
            "type": "integer",
            "minimum": 1,
            "maximum": 10,
            "description": "Editorial reliability score (1-10)"
          },
          "frequency": {
            "type": "string",
            "enum": ["realtime", "hourly", "daily", "weekly", "monthly", "quarterly", "yearly", "irregular"],
            "description": "How often new content is published"
          },
          "language": {
            "type": "string",
            "default": "en",
            "description": "Primary language code"
          },
          "contact": {
            "type": "object",
            "properties": {
              "email": { "type": "string", "format": "email" },
              "phone": { "type": "string" },
              "address": { "type": "string" },
              "tips_url": { "type": "string", "format": "uri" }
            },
            "description": "Contact information for tips/submissions"
          },
          "tags": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Content tags/topics"
          },
          "notes": {
            "type": "string",
            "description": "Editorial notes (not public)"
          },
          "fetch_config": {
            "type": "object",
            "properties": {
              "selector": { "type": "string", "description": "CSS selector for scraping" },
              "headers": { "type": "object", "description": "Custom headers for requests" },
              "rate_limit_ms": { "type": "integer", "description": "Minimum milliseconds between requests" }
            },
            "description": "Technical fetch configuration"
          },
          "active": {
            "type": "boolean",
            "default": true,
            "description": "Whether this source is actively fetched"
          },
          "verified": {
            "type": "boolean",
            "default": false,
            "description": "Whether this source has been verified by an editor"
          },
          "created_at": {
            "type": "string",
            "format": "date"
          },
          "updated_at": {
            "type": "string",
            "format": "date"
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
